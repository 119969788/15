# 使用说明

## 快速开始

### 1. 安装依赖

```bash
npm install
# 或
pnpm install
```

### 2. 配置环境变量

创建 `.env` 文件：

```bash
PRIVATE_KEY=0x你的私钥
UNDERLYING=ETH
MAX_POSITION_SIZE=100
```

### 3. 运行程序

开发模式：
```bash
npm run dev
```

生产模式：
```bash
npm run build
npm start
```

## 策略说明

### 交易逻辑

1. **监控市场**：程序持续监控15分钟市场（如"ETH 15分钟涨跌"）
2. **买入条件**：当YES token价格 ≤ 0.80时触发买入
3. **卖出挂单**：买入成功后立即挂0.90的卖出限价单
4. **预期利润**：(0.90 - 0.80) / 0.80 = 12.5%

### 价格监控

程序每2秒检查一次市场价格，当检测到价格达到买入条件时：
- 立即提交买入限价单（价格0.80）
- 买入订单提交后，立即挂卖出限价单（价格0.90）
- 持续监控订单状态，确保及时成交

## 配置参数

### 环境变量

| 变量名 | 说明 | 默认值 | 必需 |
|--------|------|--------|------|
| `PRIVATE_KEY` | 钱包私钥 | - | ✅ |
| `NETWORK` | 网络（polygon/ethereum） | polygon | ❌ |
| `UNDERLYING` | 标的资产（ETH/BTC） | ETH | ❌ |
| `MAX_POSITION_SIZE` | 最大持仓数量 | 100 | ❌ |

### 代码配置

在 `src/index.ts` 中可以修改：

```typescript
const config: TradingConfig = {
  buyPrice: 0.80,        // 买入价格
  sellPrice: 0.90,       // 卖出价格
  underlying: 'ETH',     // 标的资产
  duration: '15m',       // 市场时长
  minProfitRate: 0.10,   // 最小利润率
  maxPositionSize: 100,  // 最大持仓
};
```

## 日志说明

程序运行时会输出以下日志：

- `🚀 15分钟市场套利程序启动` - 程序启动
- `🔄 切换到新市场` - 检测到新的活跃市场
- `当前市场: ...` - 当前监控的市场
- `YES价格: ...` - 当前YES token价格
- `✅ 发现买入机会` - 价格达到买入条件
- `📈 执行买入` - 正在提交买入订单
- `✅ 买入订单已提交` - 买入订单提交成功
- `📉 挂卖出单` - 正在提交卖出订单
- `✅ 卖出订单已提交` - 卖出订单提交成功
- `✅ 订单已成交` - 订单成功成交

## 注意事项

### ⚠️ 风险提示

1. **市场风险**：15分钟市场波动极大，价格可能不会反弹到0.90
2. **流动性风险**：市场深度不足可能导致滑点
3. **时间风险**：15分钟市场很快到期，可能来不及成交
4. **技术风险**：API延迟、网络问题可能导致订单失败

### 💡 建议

- 从小额开始测试（建议10-50 USDC）
- 监控市场流动性，避免在低流动性市场交易
- 设置合理的最大持仓限制
- 不要投入超过你能承受损失的资金
- 定期检查订单状态，及时处理异常

### 🔧 故障排查

**问题：找不到活跃市场**
- 检查网络连接
- 确认标的资产名称正确（ETH/BTC）
- 等待新的15分钟市场开始

**问题：订单提交失败**
- 检查私钥是否正确
- 确认账户有足够的余额
- 检查网络是否正常

**问题：价格监控不准确**
- 可能是API延迟导致
- 尝试增加检查频率（修改sleep时间）
- 检查订单簿数据是否正常

## 技术支持

如有问题，请参考：
- [poly-sdk GitHub](https://github.com/cyl19970726/poly-sdk)
- [Polymarket 文档](https://docs.polymarket.com/)
